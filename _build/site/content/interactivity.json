{"kind":"Notebook","sha256":"eb7a8f94108fced479addcf1dbffe96034744f23c8c43ca86d2169bc6f15ed65","slug":"interactivity","location":"/interactivity.ipynb","dependencies":[{"url":"/kinetic-analysis-nb","label":"pd:platemap","kind":"Notebook","slug":"kinetic-analysis-nb","location":"/kinetic-analysis-nb.ipynb","title":"Kinetic analysis notebook"}],"frontmatter":{"title":"Timecourse with interactivity","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"python3 (default)","language":"python"},"exports":[{"format":"ipynb","filename":"interactivity.ipynb","url":"/interactivity-7e529cc61a9877e0621812d1e3ac73ad.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Interactivity","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ea7kcgCgj4"}],"identifier":"interactivity","label":"Interactivity","html_id":"interactivity","implicit":true,"key":"gEAMimcD5P"}],"key":"IYZ2GgYFRI"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Time course measurements","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cXYPy5kzq2"}],"identifier":"time-course-measurements","label":"Time course measurements","html_id":"time-course-measurements","implicit":true,"key":"NmL6pBgxxZ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"A shared understanding of how to interpret data from CFE systems would speed the development of measurements and standards towards improved reproducibility and address challenges in interpreting and comparing existing and future data, including data from failed experiments. Workshop participants agreed that time-course measurements of the product expressed in the CFE reaction should be favored over endpoint measurements, despite the time, labor, and costs involved, to obtain a more complete and informative view of a CFE reaction. Whenever possible, measurements should be reported as a reduced quantity, such as a mean value, with uncertainty (Figure 2A) and include a baseline from negative control measurements. Several recent studies have commented on metrics available from a time-course measurement of protein expression in a CFE workflow, for example, for the purpose of reaction optimization [ref] and the development of predictive modeling tools [ref]. Workshop participants emphasized several of these metrics, displayed below in Figure 2","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"s3SnfdeNVo"}],"key":"d8uBxiMbEL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Maximum yield of product expressed;","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"SRV6A8XQFs"}],"key":"RhSpRFAGl4"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineMath","value":"t_{max}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>t</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">t_{max}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7651em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ma</span><span class=\"mord mathnormal mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"oJe3SNwYYv"},{"type":"text","value":" Time to reach the maximum yield of product expressed, as the time from the start of the measurement to the time to reach the maximum yield;","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"teGSRaFXvt"}],"key":"NLK3beU1i1"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"inlineMath","value":" v_{max}","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>v</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\"> v_{max}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ma</span><span class=\"mord mathnormal mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"cmFIuqsaVr"},{"type":"text","value":" Maximum rate of product expression, as the maximum linear rate of production;","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"o5JymjC1pI"}],"key":"QkcghYAiPN"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Lag time, as the time from the start of the measurement to the time to reach the maximum rate of expression;","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"YTeQSsVzYr"}],"key":"ecIvmP6iu3"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Inflection time, as the time from the start of the measurement to the time at which the rate of product expression begins to decrease;","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"j9P1V7ZRF9"}],"key":"ZMnVP0ufit"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Percent decline, as a decrease in the amount of product expressed from the maximum yield; and,","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"tE8kWSYmDZ"}],"key":"odBCcmicLJ"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Time to percent decline, as the amount of time from the start of the measurement to the time to reach a predefined decrease in the yield of product expressed after having reached its maximum yield of product expressed.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"f3SEnE8rjh"}],"key":"s4uPz3ZivE"}],"key":"N8PJhKpj0Z"},{"type":"heading","depth":3,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Workflow","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"au7IJfY9fU"}],"identifier":"workflow","label":"Workflow","html_id":"workflow","implicit":true,"key":"F2lgY5kDxg"},{"type":"heading","depth":4,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Platemap","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"bBr8Nk3ZM2"}],"identifier":"platemap","label":"Platemap","html_id":"platemap","implicit":true,"key":"vKRLxfXN2o"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"yAYZtd3HaR"}],"key":"P1dMD8A8Yl"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Ideally, we would have a tool that (1) let’s people describe experiments in a standardized way (spec lang), (2) that can then be mapped onto a platemap, and (3) displayed in part or whole in this section [this might be an interesting place for a widget to explore the parameters of the experiment]","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"jaqqglnbjK"}],"key":"zkqLgSYjfW"}],"key":"CWluWDVkr3"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"This is text describing the context of the experiment. There a few scenarios where this text can end up here. We can imagine users working in jupyterhub typing directly or its copy and pasted in from an experimental notebook. In this particular case, we have two experiments on testing the effect of DNA concentration and a second experiment comparing different DNA constrcuts - the infamous artifact 11 (AR-11)","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"koDqAC4pID"}],"key":"omeTZptQUL"}],"key":"umlMKUR9iO"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"import data.cytosol_utils as cytosol\n\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nimport ipywidgets as widgets\nfrom ipywidgets import interact\n\n# LOAD YOUR PLATEMAP HERE\"\nplatemap_path = \"./sample-data/platemap.txt\"\nplatemap = cytosol.read_platemap_tsv(platemap_path)\n\n\n\n# Create a dropdown widget to control the table\nmenu = widgets.Dropdown(\n    options=['DNA Comparison', 'DNA Concentration'],\n    value='DNA Concentration',\n    description='Experiment:',\n)\n\n# Define a function that will plot a sine wave based on the frequency\ndef update_plot(exp_ID):\n    # for cleaner visualization\n    slx_platemap = platemap.set_index('Well', drop=True, inplace=False)\n    show_platemap = slx_platemap[slx_platemap[\"Experiment\"] == exp_ID].drop(columns=['Blank', 'Row', 'Column'])\n\n    show_platemap_length = len(show_platemap)\n    display(show_platemap.head(show_platemap_length))\n\n\n# Use interact to connect the slider to the update_plot function\ninteract(update_plot, exp_ID=menu)\ndisplay()\n\n","key":"N4ZHhDxkkh"},{"type":"output","id":"GT35aUUQ_GptLm5BQaMFV","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.jupyter.widget-view+json":{"content":"{\"model_id\":\"e4ee3f0c10494a818439fbc7c2e91543\",\"version_major\":2,\"version_minor\":0}","content_type":"application/vnd.jupyter.widget-view+json"},"text/plain":{"content":"interactive(children=(Dropdown(description='Experiment:', index=1, options=('DNA Comparison', 'DNA Concentrati…","content_type":"text/plain"}}}],"key":"rZlinByV3P"}],"key":"rxTJAwtL2R"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"See all experiments","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"R98Duouoka"}],"key":"UzzuA39gWT"},{"type":"container","kind":"table","children":[{"type":"caption","children":[{"type":"paragraph","children":[{"type":"captionNumber","kind":"table","label":"tbl:platemap","identifier":"tbl:platemap","html_id":"tbl-platemap","enumerator":"1","children":[{"type":"text","value":"Table ","key":"anZdIlQR2g"},{"type":"text","value":"1","key":"lcooMElnE5"},{"type":"text","value":":","key":"eMZwlsHeQV"}],"template":"Table %s:","key":"gEHuoRdVrs"},{"type":"text","value":"Experimental conditions studied","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"sltoJe9AVZ"}],"key":"nBKHelglqC"}],"key":"ADbhoaQwJ3"},{"type":"output","id":"ihzAHvoYJNGpKbjQCFclB","data":[{"output_type":"execute_result","execution_count":143,"metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Experiment</th>\n      <th>Label</th>\n      <th>DNA Template</th>\n      <th>[DNA Template] (ng/uL)</th>\n      <th>Blank</th>\n      <th>Row</th>\n      <th>Column</th>\n    </tr>\n    <tr>\n      <th>Well</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>B1</th>\n      <td>DNA Concentration</td>\n      <td>GFP-100</td>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>100.0</td>\n      <td>NaN</td>\n      <td>B</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>B2</th>\n      <td>DNA Concentration</td>\n      <td>GFP-50</td>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>50.0</td>\n      <td>NaN</td>\n      <td>B</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>B3</th>\n      <td>DNA Concentration</td>\n      <td>GFP-20</td>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>20.0</td>\n      <td>NaN</td>\n      <td>B</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>B4</th>\n      <td>DNA Concentration</td>\n      <td>GFP-10</td>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>10.0</td>\n      <td>NaN</td>\n      <td>B</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>B5</th>\n      <td>DNA Concentration</td>\n      <td>GFP-5</td>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>5.0</td>\n      <td>NaN</td>\n      <td>B</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>B6</th>\n      <td>DNA Concentration</td>\n      <td>GFP-2</td>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>2.0</td>\n      <td>NaN</td>\n      <td>B</td>\n      <td>6</td>\n    </tr>\n    <tr>\n      <th>B7</th>\n      <td>DNA Concentration</td>\n      <td>GFP-1</td>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>1.0</td>\n      <td>NaN</td>\n      <td>B</td>\n      <td>7</td>\n    </tr>\n    <tr>\n      <th>B8</th>\n      <td>DNA Concentration</td>\n      <td>GFP-0</td>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>0.0</td>\n      <td>Y</td>\n      <td>B</td>\n      <td>8</td>\n    </tr>\n    <tr>\n      <th>C1</th>\n      <td>DNA Comparison</td>\n      <td>plamGFP (20240622)</td>\n      <td>pT7-lacO-plamGFP (20240622)</td>\n      <td>29.3</td>\n      <td>NaN</td>\n      <td>C</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>C2</th>\n      <td>DNA Comparison</td>\n      <td>plamGFP (20240626)</td>\n      <td>pT7-lacO-plamGFP (20240626)</td>\n      <td>35.8</td>\n      <td>NaN</td>\n      <td>C</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>C3</th>\n      <td>DNA Comparison</td>\n      <td>plamGFP (20240510)</td>\n      <td>pT7-lacO-plamGFP (20240510)</td>\n      <td>17.1</td>\n      <td>NaN</td>\n      <td>C</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>C4</th>\n      <td>DNA Comparison</td>\n      <td>plamGFP (20240622)</td>\n      <td>pT7-tetO-plamGFP (20240622)</td>\n      <td>72.7</td>\n      <td>NaN</td>\n      <td>C</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>C5</th>\n      <td>DNA Comparison</td>\n      <td>plamGFP (20240626)</td>\n      <td>pT7-tetO-plamGFP (20240626)</td>\n      <td>46.4</td>\n      <td>NaN</td>\n      <td>C</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>C6</th>\n      <td>DNA Comparison</td>\n      <td>plamGFP (20240510)</td>\n      <td>pT7-tetO-plamGFP (20240510)</td>\n      <td>12.3</td>\n      <td>NaN</td>\n      <td>C</td>\n      <td>6</td>\n    </tr>\n    <tr>\n      <th>C7</th>\n      <td>DNA Comparison</td>\n      <td>deGFP 1</td>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>178.5</td>\n      <td>NaN</td>\n      <td>C</td>\n      <td>7</td>\n    </tr>\n    <tr>\n      <th>C8</th>\n      <td>DNA Comparison</td>\n      <td>deGFP 2</td>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>178.5</td>\n      <td>NaN</td>\n      <td>C</td>\n      <td>8</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"             Experiment               Label                 DNA Template  \\\nWell                                                                       \nB1    DNA Concentration             GFP-100            pT7-deGFP (AR-11)   \nB2    DNA Concentration              GFP-50            pT7-deGFP (AR-11)   \nB3    DNA Concentration              GFP-20            pT7-deGFP (AR-11)   \nB4    DNA Concentration              GFP-10            pT7-deGFP (AR-11)   \nB5    DNA Concentration               GFP-5            pT7-deGFP (AR-11)   \nB6    DNA Concentration               GFP-2            pT7-deGFP (AR-11)   \nB7    DNA Concentration               GFP-1            pT7-deGFP (AR-11)   \nB8    DNA Concentration               GFP-0            pT7-deGFP (AR-11)   \nC1       DNA Comparison  plamGFP (20240622)  pT7-lacO-plamGFP (20240622)   \nC2       DNA Comparison  plamGFP (20240626)  pT7-lacO-plamGFP (20240626)   \nC3       DNA Comparison  plamGFP (20240510)  pT7-lacO-plamGFP (20240510)   \nC4       DNA Comparison  plamGFP (20240622)  pT7-tetO-plamGFP (20240622)   \nC5       DNA Comparison  plamGFP (20240626)  pT7-tetO-plamGFP (20240626)   \nC6       DNA Comparison  plamGFP (20240510)  pT7-tetO-plamGFP (20240510)   \nC7       DNA Comparison             deGFP 1            pT7-deGFP (AR-11)   \nC8       DNA Comparison             deGFP 2            pT7-deGFP (AR-11)   \n\n      [DNA Template] (ng/uL) Blank Row  Column  \nWell                                            \nB1                     100.0   NaN   B       1  \nB2                      50.0   NaN   B       2  \nB3                      20.0   NaN   B       3  \nB4                      10.0   NaN   B       4  \nB5                       5.0   NaN   B       5  \nB6                       2.0   NaN   B       6  \nB7                       1.0   NaN   B       7  \nB8                       0.0     Y   B       8  \nC1                      29.3   NaN   C       1  \nC2                      35.8   NaN   C       2  \nC3                      17.1   NaN   C       3  \nC4                      72.7   NaN   C       4  \nC5                      46.4   NaN   C       5  \nC6                      12.3   NaN   C       6  \nC7                     178.5   NaN   C       7  \nC8                     178.5   NaN   C       8  ","content_type":"text/plain"}}}],"key":"ygXLKW7oQd"}],"label":"tbl:platemap","identifier":"tbl:platemap","enumerator":"1","html_id":"tbl-platemap","source":{"url":"/kinetic-analysis-nb","label":"pd:platemap","kind":"Notebook","slug":"kinetic-analysis-nb","location":"/kinetic-analysis-nb.ipynb","title":"Kinetic analysis notebook"},"key":"KFdk6EqYPg"}],"key":"ur9LjEwsy4"},{"type":"heading","depth":4,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Analysis","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"ttZ5xUjxqm"}],"identifier":"analysis","label":"Analysis","html_id":"analysis","implicit":true,"key":"tP4yHAxzxW"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"One thing that might be interesting to show here would be a progression from end-point analysis, unannotated timeseries, time series annotations, and then exploring the kinetic parameters.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"SdPuTblMAQ"}],"key":"AvVNfDrXcu"},{"type":"container","kind":"code","children":[{"type":"code","lang":"python","value":"# experiment -> \"DNA Concentration\"\ndata_concentration = data[data[\"Experiment\"] == \"DNA Concentration\"]","key":"gpmhILNdtc"},{"type":"caption","children":[{"type":"paragraph","children":[{"type":"captionNumber","kind":"code","label":"code:filter-platemap","identifier":"code:filter-platemap","html_id":"code-filter-platemap","enumerator":"1","children":[{"type":"text","value":"Program ","key":"uimTmN2VW6"},{"type":"text","value":"1","key":"wHfeNlwmWA"},{"type":"text","value":":","key":"v3kTyssf6m"}],"template":"Program %s:","key":"eXWN6WBcv8"},{"type":"text","value":"filter the plate map to select for a specific experiment","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"qTdMjQkbFC"}],"key":"eqIJEIupDO"}],"key":"RDm3TKoIjQ"}],"label":"code:filter-platemap","identifier":"code:filter-platemap","enumerator":"1","html_id":"code-filter-platemap","key":"j3jFJycuhg"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Here, ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"AvIYzB8oK8"},{"type":"crossReference","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Program ","key":"V1rsKu76Xc"},{"type":"text","value":"1","key":"zrrf0Ru8b4"}],"identifier":"code:filter-platemap","label":"code:filter-platemap","kind":"code","template":"Program %s","enumerator":"1","resolved":true,"html_id":"code-filter-platemap","key":"bxVwHDqQ93"},{"type":"text","value":" is used to generate the following figure using these ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"BvPvoaQQW2"},{"type":"link","url":"https://github.com/bnext-bio/nucleus/blob/main/cdk/analysis/cytosol-analysis/cytosol-kinetics.ipynb#L563-L565","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"specific lines","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"PpivbqD7cA"}],"urlSource":"https://github.com/bnext-bio/nucleus/blob/main/cdk/analysis/cytosol-analysis/cytosol-kinetics.ipynb#L563-L565","data":{"kind":"file","org":"bnext-bio","repo":"nucleus","reference":"main","file":"cdk/analysis/cytosol-analysis/cytosol-kinetics.ipynb","from":563,"to":565,"raw":"https://raw.githubusercontent.com/bnext-bio/nucleus/main/cdk/analysis/cytosol-analysis/cytosol-kinetics.ipynb"},"internal":false,"protocol":"github","key":"Urudnceja1"},{"type":"text","value":" of code from the cytosol analysis toolkit. This might be useful for instance if we’re showcasing a new feature in the codebase and we want to make a tight connection between code and function, inviting engagement.","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"IDrTdAj2Yw"}],"key":"SBdNm18dwo"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"The immediate advantage of this notebook over our existing way of publishing is that the figure is unambiguously linked to the data and code used to generate it. In this particular case, the sample data is co-located in the directory used to generate the HTML. Another approach might be to pull the data programmatically from an archive like zenodo.","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"ISsLoxSPjg"}],"key":"zeXNxeJlpv"},{"type":"admonition","class":"dropdown","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Pulling data directly from an archive","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"Ngdo6ik7aE"}],"key":"MrJPlbewHs"},{"type":"code","lang":"python","value":"# this workflow would also work for OSF\nfrom zenodo_client import Zenodo\n\nzenodo = Zenodo(access_token=token)\nOOH_NA_NA_RECORD = '13852103'\n\nplatemap_file = '20240916-platemap.xlsx'\ndata_file = 'timecourse.csv'\n\ndata = zenodo.download_latest(OOH_NA_NA_RECORD, data_file)\nplatemap = zenodo.download_latest(OOH_NA_NA_RECORD, platemap_file)","key":"w0YEkHKOUh"}],"key":"WtYqqSfrgW"},{"type":"container","kind":"figure","children":[{"type":"output","id":"Trc2uBt1aP6yJ_yppsX-a","data":[{"output_type":"execute_result","execution_count":38,"metadata":{},"data":{"text/plain":{"content":"''","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"e5fe955bb6e061e2b48c85aaedef200b","path":"/e5fe955bb6e061e2b48c85aaedef200b.png"},"text/plain":{"content":"<Figure size 674.736x500 with 1 Axes>","content_type":"text/plain"}}}],"key":"QapwJmu8dU"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig:expression kinetics","identifier":"fig:expression kinetics","html_id":"fig-expression-kinetics","enumerator":"1","children":[{"type":"text","value":"Figure ","key":"ADAjSaibD6"},{"type":"text","value":"1","key":"DXfE0UUnz8"},{"type":"text","value":":","key":"gm41I0lFXu"}],"template":"Figure %s:","key":"dYOw5iFjA4"},{"type":"text","value":"The plasmid pT7-deGFP (AR-11) is swept from 0-100 ng/","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"F0eWyNT5Oy"},{"type":"text","value":"μ","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"kKI04GJ0ll"},{"type":"text","value":"L in the PURE system","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"FyprFvzzgh"}],"key":"Pd0Em7ZNHI"}],"key":"eSGgPmDfqA"}],"label":"fig:expression kinetics","identifier":"fig:expression kinetics","enumerator":"1","html_id":"fig-expression-kinetics","source":{"url":"/kinetic-analysis-nb","label":"plt:expression-kinetics-simple","kind":"Notebook","slug":"kinetic-analysis-nb","location":"/kinetic-analysis-nb.ipynb","title":"Kinetic analysis notebook"},"key":"bevbb4V7oL"},{"type":"paragraph","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"text","value":"Now, we can showcase the kinetic analysis tool by showing a single timeseries selected from the above experiment where the extracted features are annotated. It was a bit annoying to extract one plot from the FacetGrid. Instead, I reduced the DataFrame","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"pfzi3uxCOk"}],"key":"zAtLzCFT1e"},{"type":"admonition","class":"dropdown","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Plotting a single annotated kinetic trace","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"yYuWuqAPyT"}],"key":"reLk0Q9a1V"},{"type":"code","lang":"python","value":"warnings.filterwarnings(\"ignore\")\n\nsingle_well = data_concentration[data_concentration[\"Well\"] == \"B1\"]\n\nsingle_well_kinetics = kinetic_analysis(data=single_well, data_column=\"Data\", time_cutoff=15000)\ng = sns.FacetGrid(single_well_kinetics, col=\"Well\", col_wrap=2, sharey=False, height=4, aspect=1.5)\ng.map_dataframe(plot_kinetics, y=\"Data\", show_fit=True, show_velocity=False, annotate=True)","position":{"start":{"line":54,"column":1},"end":{"line":62,"column":1}},"key":"xwv23COuUA"}],"key":"kTJ5R8Ez3W"},{"type":"container","kind":"figure","children":[{"type":"output","id":"jcJScCYDqX56uHnIiM-cH","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"08e566f25154e86450eee80180bdc854","path":"/08e566f25154e86450eee80180bdc854.png"},"text/plain":{"content":"<Figure size 1200x400 with 1 Axes>","content_type":"text/plain"}}}],"key":"ysGYVOE55m"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig:kinetics-plot","identifier":"fig:kinetics-plot","html_id":"fig-kinetics-plot","enumerator":"2","children":[{"type":"text","value":"Figure ","key":"S7YcD3vlbj"},{"type":"text","value":"2","key":"BQADoSJ7Si"},{"type":"text","value":":","key":"wCMtkqDNrX"}],"template":"Figure %s:","key":"Qnj1Cw8Ywi"},{"type":"text","value":"Annotated timeseries for pT7-deGFP (AR-11) in PURE at a concentration of 100 ng/","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"uYWmYDAdmh"},{"type":"text","value":"μ","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"UsghP2Dv1U"},{"type":"text","value":"L","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"bks5Q43XMk"}],"key":"VKMfMl7F14"}],"key":"RIPAM8krNf"}],"label":"fig:kinetics-plot","identifier":"fig:kinetics-plot","enumerator":"2","html_id":"fig-kinetics-plot","source":{"url":"/kinetic-analysis-nb","label":"plt:single-kinetics","kind":"Notebook","slug":"kinetic-analysis-nb","location":"/kinetic-analysis-nb.ipynb","title":"Kinetic analysis notebook"},"key":"SAvCkxwV3d"}],"key":"oCNwQQapRS"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Create a dropdown widget to control the table\n\n# slx_platemap = platemap.set_index('Well', drop=True, inplace=False)\n# show_platemap = slx_platemap[slx_platemap[\"Experiment\"] == exp_ID].drop(columns=['Blank', 'Row', 'Column'])\n\nexp_ID_list = platemap['Experiment'].drop_duplicates().tolist()\n\nexp_wells_options = platemap.groupby('Experiment')['Well'].apply(list).to_dict()\n# print(exp_wells_options.to_dict())\n# display(exp_wells_options)\n\nexp_menu = widgets.Dropdown(\n    options=exp_ID_list,\n    value='DNA Concentration',\n    description='Experiment:',\n)\n\nwell_menu = widgets.Dropdown(\n    options=[],\n    description='Options:'\n)\n\ndef update_well_menu(change):\n    selected_value = change['new']\n    well_menu.options = exp_wells_options[selected_value]\n    well_menu.value = well_menu.options[0]\n\n\n\ndef update_plot(Experiment, Well):\n\n    # TODO: import data\n\n    data = cytosol.read_cytation(\n        datafile=\"./sample-data/pure-dna-sweep.txt\",\n        platemap=platemap,\n    )\n\n    data_by_experiment = data[data[\"Experiment\"] == Experiment]\n    data_by_well = data_by_experiment[data_by_experiment[\"Well\"] == Well]\n\n    print(Experiment, Well)\n\n# Callback function to update the plot when dropdowns change\ndef on_dropdown_change(change):\n    Experiment = exp_menu.value\n    Well = well_menu.value\n    update_plot(Experiment, Well)\n\n# Attach the callback function to the first dropdown\nexp_menu.observe(update_well_menu, names='value')\n\n# Attach the callback to both dropdowns\nexp_menu.observe(on_dropdown_change, names='value')\nwell_menu.observe(on_dropdown_change, names='value')\n\n# Arrange the widgets in a horizontal box\nhbox = widgets.HBox([exp_menu, well_menu])\n\n# Display the widgets\ndisplay(hbox)\n\n# Initialize the second dropdown options\nupdate_well_menu({'new': exp_menu.value})\n\n# Display the dropdowns and plot\nhbox = widgets.HBox([frequency_dropdown, period_dropdown])\ndisplay(hbox)\n\n# Initial plot\nplot_sinusoid(frequency_dropdown.value, period_dropdown.value)\n","key":"WDNmj5kjwz"},{"type":"output","id":"Y3loX5st6_Ke2BmpoCeLg","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.jupyter.widget-view+json":{"content":"{\"model_id\":\"93fde67cdf854d3b98645a5e4d093c36\",\"version_major\":2,\"version_minor\":0}","content_type":"application/vnd.jupyter.widget-view+json"},"text/plain":{"content":"HBox(children=(Dropdown(description='Experiment:', options=('DNA Concentration', 'DNA Comparison'), value='DNA…","content_type":"text/plain"}}}],"key":"v2jd10024X"}],"key":"ouzRASrH4V"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"data_by_experiment = data[data[\"Experiment\"] == \"DNA Concentration\"]\n\ndata_by_well = data_by_experiment[data_by_experiment[\"Well\"] == \"B1\"]","key":"QZipe6rroQ"},{"type":"output","id":"Q16NKu0H5SaoNydKOdtk0","data":[],"key":"q5lDOoYN4f"}],"key":"W2nB7dv8GW"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Of course, the figure isn’t really what’s valuable. Ultimately, we want to associate the dimension-reduced kinetic parameters with the experimental specification. We can push this to a database like SeqBase where the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TUazUqL45w"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"input","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qzdqyybNzO"}],"key":"ms4otmycL5"},{"type":"text","value":" sequence and experimental specification are coupled to the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x4WxSP7RpO"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"output","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SDqHzP90nd"}],"key":"DprvLjSdbh"},{"type":"text","value":" kinetic parameters.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TFTUqIY1cq"}],"key":"Io7A20xKkB"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Other types of data for non-fluorescent data will have to be developed over time.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vP3yToGlmd"}],"key":"UHStWmwMGR"},{"type":"container","kind":"table","children":[{"type":"caption","children":[{"type":"paragraph","children":[{"type":"captionNumber","kind":"table","label":"tbl:platemap","identifier":"tbl:platemap","html_id":"tbl-platemap","enumerator":"1","children":[{"type":"text","value":"Table ","key":"rLEEXijYAD"},{"type":"text","value":"1","key":"jDL18oMFXD"},{"type":"text","value":":","key":"ENdPRO2Bto"}],"template":"Table %s:","key":"GZhCZJPUA2"},{"type":"text","value":"Combined experimental specification with kinetic parameters extracted from data.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gan7EvYSYo"}],"key":"k4FoVo9Fk2"}],"key":"x02pHnQMvi"},{"type":"output","id":"_u7RK8GFeP9lcNrvu7DaE","data":[{"output_type":"execute_result","execution_count":147,"metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>DNA Template</th>\n      <th>[DNA Template] (ng/uL)</th>\n      <th>Data_lag_s</th>\n      <th>Data_maxV</th>\n      <th>Data_ss_d</th>\n    </tr>\n    <tr>\n      <th>Well</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>B1</th>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>100.0</td>\n      <td>1313.877028</td>\n      <td>7.806667</td>\n      <td>50542.545455</td>\n    </tr>\n    <tr>\n      <th>B2</th>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>50.0</td>\n      <td>1374.062549</td>\n      <td>7.141111</td>\n      <td>46764.900000</td>\n    </tr>\n    <tr>\n      <th>B3</th>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>20.0</td>\n      <td>1608.134739</td>\n      <td>4.848889</td>\n      <td>32897.666667</td>\n    </tr>\n    <tr>\n      <th>B4</th>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>10.0</td>\n      <td>1523.553719</td>\n      <td>3.226667</td>\n      <td>21991.125000</td>\n    </tr>\n    <tr>\n      <th>B5</th>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>5.0</td>\n      <td>1738.834951</td>\n      <td>2.174444</td>\n      <td>15162.166667</td>\n    </tr>\n    <tr>\n      <th>B6</th>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>2.0</td>\n      <td>1542.550143</td>\n      <td>0.775556</td>\n      <td>5109.000000</td>\n    </tr>\n    <tr>\n      <th>B7</th>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>1.0</td>\n      <td>2107.566766</td>\n      <td>0.748889</td>\n      <td>4547.571429</td>\n    </tr>\n    <tr>\n      <th>B8</th>\n      <td>pT7-deGFP (AR-11)</td>\n      <td>0.0</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"           DNA Template  [DNA Template] (ng/uL)   Data_lag_s  Data_maxV  \\\nWell                                                                      \nB1    pT7-deGFP (AR-11)                   100.0  1313.877028   7.806667   \nB2    pT7-deGFP (AR-11)                    50.0  1374.062549   7.141111   \nB3    pT7-deGFP (AR-11)                    20.0  1608.134739   4.848889   \nB4    pT7-deGFP (AR-11)                    10.0  1523.553719   3.226667   \nB5    pT7-deGFP (AR-11)                     5.0  1738.834951   2.174444   \nB6    pT7-deGFP (AR-11)                     2.0  1542.550143   0.775556   \nB7    pT7-deGFP (AR-11)                     1.0  2107.566766   0.748889   \nB8    pT7-deGFP (AR-11)                     0.0     0.000000   0.000000   \n\n         Data_ss_d  \nWell                \nB1    50542.545455  \nB2    46764.900000  \nB3    32897.666667  \nB4    21991.125000  \nB5    15162.166667  \nB6     5109.000000  \nB7     4547.571429  \nB8        0.000000  ","content_type":"text/plain"}}}],"key":"q6rz9TX5RA"}],"label":"tbl:platemap","identifier":"tbl:platemap","enumerator":"2","html_id":"tbl-platemap","source":{"url":"/kinetic-analysis-nb","label":"pd:kinetics","kind":"Notebook","slug":"kinetic-analysis-nb","location":"/kinetic-analysis-nb.ipynb","title":"Kinetic analysis notebook"},"key":"KhNoYbPgIZ"}],"key":"IKBDQzYfdM"}],"key":"M87Yq3NUi7"},"references":{"cite":{"order":[],"data":{}}}}